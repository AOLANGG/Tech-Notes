## 静态成员

在类中，被`static`修饰的成员成为静态成员

`static`修饰成员变量，成为静态成员变量

1. 静态成员变量不能再初始化列表位置初始化，必须在类外进行初始化，在类外初始化必须要加类名::，类中只是声明 
2. 静态成员变量是类的属性，不属于某个具体的对象，是类所有对象共享的
3. 不存在在具体的对象中，不会影响`sizeof`的结果
4. 可以通过对象.静态成员名，也可以通过类名::静态成员变量名方式访问
5. 在程序启动时，就完成了对静态成员变量的初始化工作

`static`修饰的函数，称之为静态成员函数

1. 静态成员函数没有`this`指针
2. 静态成员函数不能直接访问非静态成员变量，因为所有静态成员变量都是通过this指针访问的
3. 静态成员函数中不能调用普通成员函数
4. 静态成员函数不能被`this`修饰
5. 静态成员函数不能是虚函数
6. 可以通过对象，也可以通过类名::方式访问

### `考点`

解释下`static`关键字的作用

**在函数内部（局部变量）：**

- 使变量在程序整个生命周期内存在
- 只初始化一次，在第一次执行时初始化
- 作用域仍限制在函数内部

**在全局作用域：**

- 限制变量/函数的作用域为当前文件（内部链接）
- 避免命名冲突

**在类中：**

- 静态成员变量：属于类而不是对象，所有对象共享同一份拷贝
- 静态成员函数：属于类而不是对象，没有this指针

`static`和`extern`关键字的区别

| 特性       | `static`               | `extern`                        |
| :--------- | :--------------------- | :------------------------------ |
| **链接性** | 内部链接               | 外部链接                        |
| **作用域** | 限制在当前文件         | 可跨文件访问                    |
| **存储期** | 静态存储期             | 静态存储期                      |
| **用途**   | 隐藏实现，保持局部状态 | 声明在其他文件中定义的变量/函数 |

什么是静态成员函数，和普通成员函数的区别

**静态成员函数**：

- 属于类而不是特定对象
- 没有`this`指针
- 可以直接通过类名调用：`ClassName::function()`

| 特性          | 静态成员函数                    | 普通成员函数     |
| :------------ | :------------------------------ | :--------------- |
| **调用方式**  | 类名::函数名() 或 对象.函数名() | 必须通过对象调用 |
| **this指针**  | 无                              | 有，指向调用对象 |
| **访问权限**  | 只能访问静态成员                | 可访问所有成员   |
| **虚函数**    | 不能是虚函数                    | 可以是虚函数     |
| **const修饰** | 不能使用const                   | 可以使用const    |

静态成员函数中能调用非静态成员函数吗？为什么？

**不能**，没有`this`指针**：静态成员函数没有`this`指针，无法确定遥操作哪个对象

静态成员函数能用`const`修饰吗？为什么？

**不能**

1. `const`成员函数表示不修改对象状态，但静态函数本就不属于任何对象
2. C++标准明确禁止静态成员函数使用`const`限定符
3. 静态函数没有`this`指针，不存在“不修改调用对象”的概念

静态成员函数能设置为虚函数吗？为什么？

**不能**

1. **虚函数机制依赖对象**：虚函数通过对象的虚函数表(vtable)实现，需要this指针来访问vtable
2. **静态函数无对象关联**：静态函数属于类而非对象，没有this指针

## 友元

### 概念

友元提供了一种突破封装的方式，有时提供了便利，但是友元破坏了封装，所以不宜多用

### 分类

#### 友元函数

友元函数可以直接访问类的私有成员，它是定义在类外部的普通函数，不属于任何类，但需要在类的内部声明，声明的时候需要加`friend`关键字



1. 友元函数可访问私有和保护成员，但不是类的成员函数
2. 友元函数不能用`const`修饰
3. 友元函数可以在类定义的任何地方声明，不受访问限定符的限制
4. 一个函数可以是多个类的友元函数
5. 友元函数的调用和普通函数的调用原理相同

#### 友元类

友元类的所有成员函数都可以是另一个类的友元函数，都可以访问另一个类中的非公有成员

### 注意

1. 友元关系是单向的，不具有双向性
2. 友元关系不能传递
3. 友元关系不能继承